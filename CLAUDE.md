# CLAUDE.md

## 言語設定

- 常に日本語で会話する
- 技術用語は必要に応じて英語を併記する（例：依存性注入「Dependency Injection」）

## 開発手法

### テスト駆動開発（TDD）

- 常にテスト駆動開発で進める
- コードを書く前にまずテストを書く
- テストが失敗することを確認してからコードを実装する
- リファクタリングはテストが通過していることを確認してから行う

### 設計原則

- 単一責任の原則（SRP）を遵守する
- 依存性の注入を活用する

## コーディング規約

### 共通

- プロジェクトルートの.editorconfigファイルに準拠する
- コードフォーマットはIDE/エディタの自動フォーマット機能を活用する

### PHP

- PSR-12コーディング規約に従う
- 変数名、関数名はcamelCaseを使用
- クラス名はPascalCaseを使用
- プライベートメンバーには_（アンダースコア）プレフィックスを使用しない

## 出力形式

### コード生成

- コードには適切なコメントを含める
- PHPDocやJSDocを使用して関数の説明、パラメータ、戻り値を記述する
- 複雑なロジックには説明コメントを追加する

### エラー処理

- 例外は具体的なメッセージと共にスロー
- フロントエンドでのエラーは適切なエラーコードとユーザーフレンドリーなメッセージを提供する
- ログにはコンテキスト情報を含める

## レビュープロセス

- コードレビューでは以下の点に注目する：
  - テストカバレッジ
  - コードの可読性
  - パフォーマンスへの影響
  - セキュリティ上の考慮事項

## 推奨される開発フロー

1. 要件を理解する
2. テストケースを作成する
3. 実装する
4. テストが通ることを確認する
5. コードをリファクタリングする
6. 静的解析ツールでチェックする
7. タイプエラーをチェックする
8. 人間がコードレビューしてからコミットする

## 重要な参照ファイル

1. README.md - プロジェクトの全体像、コマンド、設定方法を確認する
2. CLAUDE.md - コード作成のガイドラインと開発フローを確認する

ClaudeCodeは、README.mdとCLAUDE.mdの両方を参照して作業を進める必要があります。

## プロジェクト構成の変更時の対応

- ディレクトリ構成に変更がある場合は、README.mdの「プロジェクト構成」セクションを必ず更新する
- 新しいツールやライブラリを導入した場合は、関連するディレクトリ構造をREADME.mdに追加する
- ディレクトリ構造の変更が他の開発者に影響する場合は、その理由と使用方法を詳細に記載する
- 既存のディレクトリ構造に変更がなくても、新しく作成したディレクトリについては説明を追加する

## セキュリティガイドライン

- 認証情報を直接コードに記述しない
- ユーザー入力のバリデーションを徹底する
- XSS、CSRF対策を実装する
- APIレスポンスに過剰な情報を含めない
